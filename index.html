<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="assets/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="assets/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="assets/i18n/bootstrap-datepicker.vi.min.js"></script>
    <script type="text/javascript" src="assets/js/moment-with-locales.min.js"></script>
    <script type="text/javascript" src="assets/bootstrap3-editable/js/bootstrap-editable.js"></script>
    <script type="text/javascript" src="assets/js/select2.full.min.js"></script>
    <script type="text/javascript" src="assets/js/autoNumeric.min.js"></script>
    <script type="text/javascript" src="assets/js/dexie.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.easing.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="assets/js/dataTables.bootstrap4.js"></script>
    <script type="text/javascript" src="assets/js/sb-admin.min.js"></script>
    <script type="text/javascript" src="assets/js/sb-admin-datatables.min.js"></script>
    <script type="text/javascript" src="assets/js/toastr.min.js"></script>
    <script type="text/javascript" src="assets/js/pagination.min.js"></script>

    <script type="text/javascript" src="data.json"></script>
    <script type="text/javascript" src="assets/js/utilities.js"></script>
    <script type="text/javascript" src="assets/js/management.js"></script>
    <script type="text/javascript" src="assets/js/debt_records_modal.js"></script>
    <script type="text/javascript" src="assets/js/customer_management.js"></script>
    <script type="text/javascript" src="assets/js/product_management.js"></script>
    <script type="text/javascript" src="assets/js/select2_customer_name_controller.js"></script>
    <script type="text/javascript" src="assets/js/select2_product_name_controller.js"></script>
    <script type="text/javascript" src="assets/js/cal_tool.js"></script>
    <script type="text/javascript" src="assets/js/store_data.js"></script>
    <script type="text/javascript" src="assets/js/coffee_tab.js"></script>
    <script type="text/javascript" src="assets/js/coffee_records_modal.js"></script>
    <script type="text/javascript" src="assets/js/index.js"></script>

    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/fontawesome-all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/bootstrap-datepicker3.min.css">
    <link rel="stylesheet" href="assets/css/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="assets/css/sb-admin.css">
    <link rel="stylesheet" href="assets/css/select2.min.css">
    <link rel="stylesheet" href="assets/css/toastr.min.css">
    <link rel="stylesheet" href="assets/css/custom.css">


    <style type="text/css" media="print">
      @page { size: landscape; margin: 0mm; }
      @media print {
        .noprint {display:none;}
        .editable-empty{display:none;}
      }
    </style>
    <title>CTY TNHH MTV PHAM GIA DAKNONG</title>
  </head>
  <body class="sticky-footer bg-light" id="page-top">
    <div class="container-fluid">
      <div class="row" style="margin-top:10px; margin-bottom: 20px">
        <div class="col-lg-7 col-sm-6">
          <div class="row">
            <h3 class="col-lg-7 col-sm-12">BÁO CÁO CÔNG NỢ</h3>
            <div class="col-lg-5 col-sm-6 noprint">
              <ul id="top_control" class="nav nav-tabs tabs-bordered text-center" style="font-size: 12px">
                <li class="nav-item" style="width: 33%">
                  <a href="#cal_tool" data-toggle='tab' class="nav-link btn-info">Tính lãi</a>
                </li>
                <li class="nav-item" style="width: 33%; margin-left: 1px">
                  <a href="#coffee_tool" data-toggle='tab' class="nav-link btn-secondary btn-coffee">Cà phê</a>
                </li>
                <li class="nav-item" style="width: 33%; margin-left: 1px">
                  <a href="#management" data-toggle='tab' class="nav-link btn-secondary">Quản lý</a>
                </li>
              </ul>
              <!-- cal_tool Modal-->
              <div class="modal fade" id="cal_tool_rec_modal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Danh sách công nợ</h5>
                      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-lg-3 col-md-4">
                          <div class="form-group row">
                            <label for="modal_select2_customer_name" class="col-lg-4 col-sm-4 col-form-label">Tìm kiếm</label>
                            <div class="col-lg-8 col-sm-8">
                              <select id="modal_select2_customer_name">
                                <option></option>
                              </select>
                              <input type="hidden" id="modal_customer_id" >
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <table class="table table-bordered table-striped table-hover">
                          <thead>
                            <th class="text-center" style="width: 5%">Xoá</th>
                            <th class="text-center" style="width: 5%">Xem</th>
                            <th class="text-center" style="width: 5%">ID</th>
                            <th class="text-center" style="width: 15%">Khách hàng</th>
                            <th class="text-center" style="width: 15%">Ngày lưu</th>
                            <th class="text-center" style="width: 15%">Nợ</th>
                            <th class="text-center" style="width: 15%">Trả</th>
                            <th class="text-center" style="width: 15%">Tiền lãi</th>
                            <th class="text-center" style="width: 15%">Tổng</th>
                          </thead>
                          <tbody id='debt_rec_table'>

                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btn btn-primary" type="button" data-dismiss="modal">Đóng</button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- coffee_modal -->
              <div class="modal fade" id="coffee_rec_modal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Danh sách công nợ</h5>
                      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-lg-3 col-md-4">
                          <div class="form-group row">
                            <label for="modal_select2_customer_name" class="col-lg-4 col-sm-4 col-form-label">Tìm kiếm</label>
                            <div class="col-lg-8 col-sm-8">
                              <select id="coffee_modal_select2_customer_name">
                                <option></option>
                              </select>
                              <input type="hidden" id="coffee_modal_customer_id" >
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <table class="table table-bordered table-striped table-hover">
                          <thead>
                            <th class="text-center" style="width: 5%">Xoá</th>
                            <th class="text-center" style="width: 5%">Xem</th>
                            <th class="text-center" style="width: 5%">ID</th>
                            <th class="text-center" style="width: 10%">Khách hàng</th>
                            <th class="text-center" style="width: 10%">Ngày lưu</th>
                            <th class="text-center" style="width: 10%">Số lượng bán</th>
                            <th class="text-center" style="width: 10%">Tổng thành tiền</th>
                            <th class="text-center" style="width: 10%">Tổng trả</th>
                            <th class="text-center" style="width: 10%">Nợ</th>
                            <th class="text-center" style="width: 10%">Tổng xuất</th>
                            <th class="text-center" style="width: 10%">Còn lưu kho</th>
                          </thead>
                          <tbody id='coffee_rec_table'>

                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button class="btn btn-primary" type="button" data-dismiss="modal">Đóng</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-sm-5 text-right" style="padding-top: 18px;">
          <small id='current_date_time'></small>
        </div>
        <div class="col-lg-3 col-sm-1 text-right noprint">
          <button type="button" class="btn btn-success" onClick="reload_window()" name="button"><i class="fas fa-file-alt"></i></button>
          <button type="button" class="btn btn-warning hidden" onClick="import_data_from_json()" name="button"></button>
          <button type="button" class="btn btn-primary" onClick="save_calculated_data()" name="button"><i class="far fa-save"></i></button>
          <button type="button" class="btn btn-info" data-toggle="modal" data-target="#cal_tool_rec_modal"><i class="far fa-folder-open"></i></button>
          <button type="button" class="btn btn-secondary btn-coffee" data-toggle="modal" data-target="#coffee_rec_modal"><i class="far fa-folder-open"></i></button>
          <button type="button" class="btn btn-secondary" onClick="window.print();" name="button"><i class="fas fa-print"></i></button>
        </div>
      </div>
      <hr style="margin-top: -15px">
      <div class="tab-content">
        <div class="tab-pane active" id="cal_tool" style="font-size: 13px">
          <div class="row">
            <div class="col-lg-4 col-md-4">
              <div class="form-group row">
                <label for="customer_name" class="col-lg-4 col-sm-5 col-form-label">Tên Khách Hàng</label>
                <div class="col-lg-8 col-sm-7">
                  <select id="select2_customer_name">
                    <option></option>
                  </select>
                  <input type="hidden" id="cal_customer_id" >
                  <input type="hidden" id="cal_customer_cus_id" >
                  <input type="hidden" id="cal_customer_name" >
                  <input type="hidden" id="cal_rec_id" >
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-4">
              <div class="form-group row">
                <label for="phone_number" class="col-lg-4 col-sm-4 col-form-label">Điện Thoại</label>
                <div class="col-lg-8 col-sm-8">
                  <input type="text" id="cal_customer_phone" class="form-control form-control-small" value="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4">
              <div class="form-group row">
                <label for="address" class="col-lg-2 col-sm-3 col-form-label">Địa chỉ</label>
                <div class="col-lg-10 col-sm-9">
                  <input type="text" id="cal_customer_address" class="form-control form-control-small" value="">
                </div>
              </div>
            </div>
            <div class="col-1">
              <button type="button" onclick="save_customer_data()" class="btn btn-primary btn-small noprint" name="button">+</button>
            </div>
          </div>
          <table class="table table-bordered noprint">
            <thead>
              <th class="text-center" style="width: 7%">Phương thức</th>
              <th class="text-center" style="width: 8%">Ngày ghi</th>
              <th class="text-center" style="width: 8%; display: none;">Ngày tính</th>
              <th class="text-center" style="width: 2%; display: none;">S.ngày</th>
              <th class="text-center" style="width: 24%">Danh mục - Số lượng - Đơn giá</th>
              <th class="text-center" style="width: 7%">DVT</th>
              <th class="text-center" style="width: 6%">Lãi</th>
            </thead>
            <tbody>
              <tr>
                <td class="text-center">
                  <div class="custom-control custom-radio custom-control-inline" style="margin-left: -5px; margin-right: 0px;">
                    <input type="radio" id="customRadioInline1" checked name="customRadioInline1" class="custom-control-input">
                    <label class="custom-control-label pt-1" for="customRadioInline1">Nợ</label>
                  </div>
                  <div class="custom-control custom-radio custom-control-inline" style="margin-left: 5px; margin-right: 0px;">
                    <input type="radio" id="customRadioInline2" name="customRadioInline1" class="custom-control-input">
                    <label class="custom-control-label pt-1" for="customRadioInline2">Trả</label>
                  </div>
                </td>
                <td class="ngay_no text-center"><input onchange="cal_total_val()" id="cal_product_start_date" class="col-12 datepicker text-center" style="" type="text" name="" value=""></td>
                <td class="ngay_tinh text-center" style="display:none;"><input onchange="cal_total_val()" id="cal_product_end_date" class="col-12 datepicker text-center" style="" type="text" name="" value=""></td>
                <td class="so_ngay text-center" style="display:none;"><strong><span id="cal_product_diffDays"> </span></strong></td>
                <td class="ten_mat_hang text-center">
                  <div class="form-inline">
                    <select style="width: 25%" id="select2_product_name" class="text-center" >
                      <option></option>
                    </select>
                    <input style="width: 20%" placeholder="Số lượng" onchange="cal_total_val()" id="cal_product_quantity" class="text-center form-control form-control-small">
                    <input type="hidden" id="cal_product_id" >
                    <input type="hidden" id="cal_product_name" >
                    <input onchange="cal_total_val()" placeholder="Đơn giá" style="width: 25%" id="cal_product_price" class="form-control form-control-small text-center" >
                    <button type="button" onclick="save_product_data()" style="width: 7%" class="ml-1 btn btn-primary btn-small noprint" name="button">+</button>
                  </div>
                </td>
                <td class="don_vi_tinh text-center">
                  <select onchange="cal_total_val()" id="cal_product_dvt" class="text-center" >
                    <option></option>
                  </select>
                </td>
                <td class="lai_xuat text-center">
                  <select onchange="cal_total_val()" id="cal_product_debt_rate" class="text-center" >
                    <option></option>
                  </select>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="row noprint mb-2">
            <div class="col-4">
              <div class="row"><span class="col-4">Nợ gốc:</span><strong class='col-5 text-right'> <span id="no_goc">  </span> </strong> </div>
              <div class="row"><span class="col-4">Lãi:</span><strong class='col-5 text-right'> <span id="tien_lai">  </span> </strong> </div>
              <div class="row"><span class="col-4">Tổng thanh toán:</span><strong class='col-5 text-right'><span id="tong_thanh_toan">  </span> </strong> </div>
            </div>
            <div class="col-6">
              <div class="row">
                <h6 class="col-3">Ghi chú:</h6>
                <textarea class="col-9 form-control" id="invoice_note" name="name" rows="3" cols="80"></textarea>
              </div>
            </div>
            <div class="col-2 text-right">
              <button type="button" class="btn btn-primary" onClick="import_debt_to_table()" name="button">Nhập công nợ</button>
            </div>
          </div>
          <table class="table table-bordered table-striped table-hover">
            <thead>
              <th class="text-center noprint" style="width: 1%">Xoá</th>
              <th class="text-center" style="width: 10%">Ngày ghi</th>
              <th class="text-center" style="width: 10%">Ngày tính</th>
              <th class="text-center" style="width: 5%">S.ngày</th>
              <th class="text-center" style="width: 10%">Danh mục</th>
              <th class="text-center" style="width: 4%">SL</th>
              <th class="text-center" style="width: 10%">Đơn giá</th>
              <th class="text-center" style="width: 10%">Nợ</th>
              <th class="text-center" style="width: 10%">Trả</th>
              <th class="text-center" style="width: 10%">Tiền lãi</th>
              <th class="text-center" style="width: 10%">Tổng</th>
              <th class="text-center" style="width: 10%">Ghi chú</th>
            </thead>
            <tbody id='detb_table_body'>
            </tbody>
            <tbody>
              <tr class="success">
                <td class="noprint"></td>
                <td ><strong>Tổng cộng</strong></td>
                <td class="text-center" ><a class="noprint" href="#" onclick="set_current_date()">Hôm nay</a></td>
                <td colspan="4" >Lãi xuất:<strong id='td_lai_xuat'>0%</strong></td>
                <td class="text-right" ><strong id='td_tong_goc'>0</strong></td>
                <td class="text-right" ><strong id='td_tong_tra'>0</strong></td>
                <td class="text-right" ><strong id='td_tong_lai'>0</strong></td>
                <td class="text-right" ><strong id='td_tong_thanhtoan'>0</strong></td>
                <td class="text-left"></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="tab-pane" id="coffee_tool" style="font-size: 13px">
          <div class="row">
            <div class="col-lg-4 col-md-4">
              <div class="form-group row">
                <label for="customer_name" class="col-lg-4 col-sm-5 col-form-label">Tên Khách Hàng</label>
                <div class="col-lg-8 col-sm-7">
                  <select id="select2_customer_name_coffee">
                    <option></option>
                  </select>
                  <input type="hidden" id="cal_customer_id_coffee" >
                  <input type="hidden" id="cal_customer_cus_id_coffee" >
                  <input type="hidden" id="cal_customer_name_coffee" >
                  <input type="hidden" id="cal_rec_id_coffee" >
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-4">
              <div class="form-group row">
                <label for="phone_number" class="col-lg-4 col-sm-4 col-form-label">Điện Thoại</label>
                <div class="col-lg-8 col-sm-8">
                  <input type="text" id="cal_customer_phone_coffee" class="form-control form-control-small" value="">
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-md-4">
              <div class="form-group row">
                <label for="address" class="col-lg-2 col-sm-3 col-form-label">Địa chỉ</label>
                <div class="col-lg-10 col-sm-9">
                  <input type="text" id="cal_customer_address_coffee" class="form-control form-control-small" value="">
                </div>
              </div>
            </div>
            <div class="col-1">
              <button type="button" onclick="save_customer_data_coffee()" class="btn btn-primary btn-small noprint" name="button">+</button>
            </div>
          </div>
          <table class="table table-bordered table-striped table-hover">
            <thead>
              <th class="text-center noprint" style="width: 5%">Xoá</th>
              <th class="text-center" style="width: 10%">Ngày ghi</th>
              <th class="text-center" style="width: 10%">Số lượng bán</th>
              <th class="text-center" style="width: 10%">Giá</th>
              <th class="text-center" style="width: 10%">Thành tiền</th>
              <th class="text-center" style="width: 10%">Trả</th>
              <th class="text-center" style="width: 10%">Còn</th>
              <th class="text-center" style="width: 10%">Xuất</th>
              <th class="text-center" style="width: 10%">Lưu kho</th>
              <th class="text-center" style="width: 15%">Ghi chú</th>
            </thead>
            <tbody id='coffee_table'>
            </tbody>
            <tbody>
              <tr class="success">
                <td class="noprint"></td>
                <td class="text-center"><strong>Tổng</strong></td>
                <td class="text-right" ><strong id='total_coffee_tong_ban'>0</strong></td>
                <td class="text-right" ><strong></strong></td>
                <td class="text-right" ><strong id='total_coffee_thanh_tien'>0</strong></td>
                <td class="text-right" ><strong id='total_coffee_tra'>0</strong></td>
                <td class="text-right" ><strong id='total_coffee_con'>0</strong></td>
                <td class="text-right" ><strong id='total_coffee_xuat'>0</strong></td>
                <td class="text-right" ><strong id='total_coffee_ton'>0</strong></td>
                <td class="text-right" ><strong></strong></td>
              </tr>
            </tbody>
          </table>
          <button type="button" class="btn btn-primary noprint" onclick="append_new_coffee_line()" style="float:right" name="button">Thêm</button>
        </div>
        <div class="tab-pane" id="management">
          <nav class="navbar navbar-expand-lg navbar-light bg-light static-top" id="mainNav" >
            <div class="collapse navbar-collapse" id="navbarResponsive">
              <ul class="nav navbar-nav navbar-sidenav" id="exampleAccordion" style="margin-top: 0px">
                <li class="nav-item" data-placement="right" title="Tables">
                  <a class="nav-link" href="#customer_tab" data-toggle='tab'>
                    <i class="fa fa-fw fa-address-book"></i>
                    <span id='' class="nav-link-text">Khách hàng</span>
                  </a>
                </li>
                <li class="nav-item" data-placement="right" title="Tables">
                  <a class="nav-link" href="#product_tab" data-toggle='tab'>
                    <i class="fa fa-fw fa-table"></i>
                    <span class="nav-link-text">Danh mục</span>
                  </a>
                </li>
              </ul>
            </div>
          </nav>
          <div class="content-wrapper">
            <div class="container-fluid">
              <!-- Breadcrumbs-->
              <!-- <ol class="breadcrumb">
                <li class="breadcrumb-item">
                  <a href="#">Dashboard</a>
                </li>
                <li class="breadcrumb-item active">My Dashboard</li>
              </ol> -->
              <div class="tab-content">
                <div class="tab-pane active" id='customer_tab'>
                  <div class="row">
                    <div class="col-lg-3 col-md-4">
                      <div class="form-group row">
                        <label for="customer_name" class="col-lg-2 col-sm-5 col-form-label">Tên</label>
                        <div class="col-lg-10 col-sm-7">
                          <input type="text" id="tab_cus_name" name="customer_name" class="form-control" value="">
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group row">
                        <label for="phone_number" class="col-lg-4 col-sm-4 col-form-label">Điện thoại</label>
                        <div class="col-lg-8 col-sm-8">
                          <input type="text" id="tab_cus_phone" name="phone_number" class="form-control" value="">
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group row">
                        <label for="address" class="col-lg-3 col-sm-3 col-form-label">Địa chỉ</label>
                        <div class="col-lg-9 col-sm-9">
                          <input type="text" id='tab_cus_address' name="address" class="form-control" value="">
                        </div>
                      </div>
                    </div>
                    <div class="col-1">
                      <button type="button" onclick="get_and_import_from_cus_tab()" class="btn btn-primary noprint" name="button">Thêm</button>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <table class="table table-bordered table-striped table-hover">
                        <thead>
                          <th class="text-center" style="width: 10%">Xoá</th>
                          <th class="text-center" style="width: 10%">STT</th>
                          <th class="text-center" style="width: 20%">Tên Khách Hàng</th>
                          <th class="text-center" style="width: 20%">Điện Thoại</th>
                          <th class="text-center" style="width: 40%">Địa chỉ</th>
                        </thead>
                        <tbody id="customer_table">
                        </tbody>
                      </table>
                    </div>

                  </div>
                </div>
                <div class="tab-pane" id='product_tab'>
                  <div class="row">
                    <div class="col-lg-6 col-md-4">
                      <div class="form-group row">
                        <label for="product_name" class="col-lg-3 col-sm-5 col-form-label">Tên Danh Mục</label>
                        <div class="col-lg-9 col-sm-7">
                          <input type="text" id="tab_prod_name" name="product_name" class="form-control" value="">
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-4">
                      <div class="form-group row">
                        <label for="product_price" class="col-lg-2 col-sm-4 col-form-label">Giá</label>
                        <div class="col-lg-10 col-sm-8">
                          <input type="text" id="tab_prod_price" name="product_price" class="form-control text-right" value="">
                        </div>
                      </div>
                    </div>
                    <div class="col-1">
                      <button type="button" onclick="get_and_import_from_prod_tab()" class="btn btn-primary noprint" name="button">Thêm</button>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <table class="table table-bordered table-striped table-hover">
                        <thead>
                          <th class="text-center" style="width: 10%">Xoá</th>
                          <th class="text-center" style="width: 10%">STT</th>
                          <th class="text-center" style="width: 40%">Tên Danh Mục</th>
                          <th class="text-center" style="width: 20%">Giá</th>
                          <th class="text-center" style="width: 20%"></th>
                        </thead>
                        <tbody id="product_table">
                        </tbody>
                      </table>
                    </div>
                  </div>
              </div>
            </div>
            <footer class="sticky-footer" style="width: calc(100% - 265px);">
              <div class="container">
                <div class="text-center">
                  <small>Copyright © Truong Le - htr.lee@gmail.com - 0974156062</small>
                </div>
              </div>
            </footer>
            <a class="scroll-to-top rounded" href="#page-top">
              <i class="fa fa-angle-up"></i>
            </a>

          </div>
        </div>
      </div>

    </div>
  </body>

</html>
